{% extends 'base.html' %}

{% block app %}
  <h1 class="text-center mt-3"> 영화 상세정보 <h1>
  <hr>
  <div class="row">
    <div class="col-12 mb-5">
      <img src="{{ movie.backdrop_path }}" style="width: 100%; height: 20vw;">
    </div>
    <div>
      <div>
        <p class="d-inline"> {{ movie.title }} </p>
        {% if request.user in movie.like_users.all %}
          <a href="{% url 'movies:movie_like' movie.pk %}"><i class="fas fa-heart" style="color: red;"></i></a> :{{ movie.like_users.count }}
        {% else %}
          <a href="{% url 'movies:movie_like' movie.pk %}"><i class="far fa-heart" style="color: red;"></i></a> :{{ movie.like_users.count }}
        {% endif %}
      </div>
      <h5>{{ movie.title_en }} <span class="badge badge-warning">{{ movie.vote_average }}</span></h5>
      <h5>개봉 : {{ movie.release_date }}</h5>
      {% for genre in genres %}
        <small><h5 class="badge badge-info">{{ genre.name }}</h5></small>
      {% endfor %}
      <br>
      {% if movie.overview %}
        <h5>{{ movie.overview }}</h5>
      {% else %}
        <h3> 해당 영화는 OverView 가 제공되지 않습니다. </h3>
      {% endif %}
    </div>
  </div>
  <br>

  <h2 class="text-center mt-5">리뷰 목록</h2>
  <a href="{% url 'movies:review_create' movie.pk %}"><input class="btn btn-primary" type="submit" value="글 작성"></a>
  <hr>
  <table class="table table-hover">
    <thead class="thead-dark">
      <tr>
        <th scope="col">#</th>
        <th scope="col">제목</th>
        <th scope="col">작성일</th>
        <th scope="col">글쓴이</th>
      </tr>
    </thead>
    <tbody>
      {% for review in reviews %}
        <tr>
          <th scope="row">{{ review.pk }}</th>
          <td><a href="{% url 'movies:review_detail' movie.pk review.pk %}">{{ review.title }}</a></td>
          <td>{{ review.created_at }}</td>
          <td>{{ review.user }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock  %}
